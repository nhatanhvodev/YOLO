<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Camera 3 - Vi Phạm Làn Đường</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    body{background:#eaedf1;font-family:Arial;margin:0;}a{text-decoration:none}a:hover{color:#0b8e2f}
    .layout{display:flex;align-items:flex-start;gap:24px;padding:16px;max-width:1600px;margin:0 auto;}
    .sidebar{flex:0 0 25%;max-width:25%;background:#fff;border-radius:12px;padding:20px;box-shadow:0 4px 16px rgba(0,0,0,.12);}
    .sidebar h1{font-size:28px;line-height:1.3;text-align:center;color:#0b5e30;font-weight:700;margin:8px 0 4px;}
    .sidebar h2{font-size:16px;text-align:center;color:#0b5e30;font-weight:500;margin-bottom:18px;}
    .nav-link{display:block;background:#2c3e50;color:#fff;padding:12px 16px;border-radius:8px;margin-bottom:12px;font-size:16px}
    .nav-link.active{background:#1a242f}
    .nav-link span.badge{background:#fff;color:#2c3e50;margin-right:8px}
    .video-box{flex:0 0 75%;max-width:75%;background:#fff;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.15);padding:16px;display:flex;flex-direction:column;}
    .video-box h3{text-align:center;margin:0 0 16px;font-weight:600;background:#555;color:#fff;padding:12px;border-radius:8px;font-size:24px;}
    img#stream{width:100%;height:calc(100vh - 300px);min-height:360px;object-fit:contain;background:#000;border-radius:8px;}
    .top-heading{text-align:center;margin:24px 0 8px;font-weight:800;color:#0b5e30;font-size:42px;}
    .sub-heading{text-align:center;margin:0 0 24px;color:#0b5e30;font-size:20px;font-weight:500;}
    #preloader{background:#e5eff1 url("{{ url_for('static', filename='img/loader.gif') }}") no-repeat center center;background-size:15%;height:100vh;width:100%;position:fixed;z-index:100;}
    .display{animation:preloaderFade .6s forwards;}
    @keyframes preloaderFade{100%{opacity:0;visibility:hidden;}}
    @media (max-width:1100px){.layout{flex-direction:column;}.sidebar{max-width:100%;flex:1;}.video-box{max-width:100%;flex:1;}}
  </style>
</head>
<body>
  <div id="preloader"></div>
  <div class="top-heading">HỆ THỐNG GIÁM SÁT GIAO THÔNG</div>
  <div class="sub-heading">Camera 3 - Giám Sát Xe Vi Phạm Làn Đường</div>
  <div class="layout">
    <div class="sidebar">
      <h1>GIÁM SÁT</h1>
      <h2>Làn Đường</h2>
      <a class="nav-link" href="/LaneViolate1"><span class="badge rounded-pill">1</span>Camera 1</a>
      <a class="nav-link" href="/LaneViolate2"><span class="badge rounded-pill">2</span>Camera 2</a>
      <a class="nav-link active" href="/LaneViolate3"><span class="badge rounded-pill">3</span>Camera 3</a>
      <a class="nav-link" href="/LaneViolate4"><span class="badge rounded-pill">4</span>Camera 4</a>
      <a class="nav-link" href="/thongke">Thống Kê</a>
      <a class="nav-link" href="/bb">Luật Giao Thông</a>
      <a class="nav-link" href="/">Trang Chủ</a>
    </div>
    <div class="video-box">
      <h3>Camera 3</h3>
      <img id="stream" src="/camera3" alt="Camera 3" loading="lazy" />
      <div id="conn-alert" class="text-center text-danger mt-2 d-none">Mất kết nối</div>
    </div>
  </div>
<script>
  const loader=document.getElementById('preloader');
  window.addEventListener('load',()=>{
    loader.classList.add('display');
    setTimeout(()=>{loader.style.display='none';},600);
  });
  const video=document.getElementById('stream');
  const alertDiv=document.getElementById('conn-alert');
  video.onerror=()=>{alertDiv.classList.remove('d-none');};
  video.onplay=()=>{alertDiv.classList.add('d-none');};
</script>
</body>
</html>